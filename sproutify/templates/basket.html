{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sproutify - Basket</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <link rel="stylesheet" href="{% static 'css/login.css' %}">
    <link rel="stylesheet" href="{% static 'css/basket.css' %}">
</head>
<body>
  <!-- LOGIN POPUP -->
  {% include 'partials/login_popup.html' %}
  <!-- REGISTER POPUP -->
  {% include 'partials/register_popup.html' %}

  <!-- preloader -->
  {% include 'partials/preloader.html' %}

  <!-- Whatsapp logo -->
  {% include "partials/whatsapp.html" %}

  <!-- navbar -->
  {% include 'partials/navbar.html' %}

<!-- Smart Cart Page Layout -->
<div class="cart-container">
      <!-- Checkout Stepper -->
<div class="checkout-stepper">
  <div class="step active" data-step="1">
    <div class="circle">1</div>
    <div class="label">Cart</div>
  </div>
  <div class="line"></div>
  <div class="step" data-step="2">
    <div class="circle">2</div>
    <div class="label">Delivery</div>
  </div>
  <div class="line"></div>
  <div class="step" data-step="3">
    <div class="circle">3</div>
    <div class="label">Payment</div>
  </div>
</div>
<div class="cart-container">
  <div class="cart-items"></div>

  <div class="checkout-section">
    <div class="address-block"></div>
    <div class="order-summary"></div>
  </div>
</div>
</div>
    <!-- Footer -->
    {% include 'partials/footer.html' %}

</body>
<script>
function setActiveStep(stepNum) {
  const steps = document.querySelectorAll('.step');
  steps.forEach((step, index) => {
    step.classList.remove('active', 'completed');
    if (index < stepNum - 1) {
      step.classList.add('completed');
    } else if (index === stepNum - 1) {
      step.classList.add('active');
    }
  });
}

// Example: Move to delivery step
setActiveStep(2); // 1 = Cart, 2 = Delivery, 3 = Payment
</script>
  {% include 'partials/checkout.html' %}
  {% include 'partials/toast.html' %}

  <script>
    // âœ… Master event listeners
    window.addEventListener("DOMContentLoaded", () => {
        document.addEventListener("click", handleAddToCart);
        document.addEventListener("click", handleCartView);
        // loadProducts();
        initLogin();
        initRegistration();
        initSearch();
    });
  </script>
</html>